angular.module("pancakesAngular",[]),angular.module("pancakesAngular").factory("activeUser",function(){return{}}),angular.module("pancakesAngular").factory("ajax",["$q","$http","eventBus","config",function(e,n,t,r){function a(a,o,i,u){var l,c,d=e.defer(),s=[];a=r.apiBase+a,i=i||{};var f=i.data;delete i.data,a.indexOf("{_id}")>=0?i._id?(a=a.replace("{_id}",i._id),delete i._id):f&&f._id&&(a=a.replace("{_id}",f._id)):"GET"===o&&i._id&&(a+="/"+i._id,delete i._id);var g=i.showErr!==!1;delete i.showErr,i.lang=i.lang||r.lang;for(l in i)i.hasOwnProperty(l)&&i[l]&&(c=i[l],c=angular.isObject(c)?JSON.stringify(c):c,s.push(encodeURIComponent(l)+"="+encodeURIComponent(c)));s.length&&(a+="?"+s.join("&"));var p={method:o,url:a,withCredentials:!0,cache:!1};return f&&(p.data=f),t.emit(u+"."+o.toLowerCase()+".start"),n(p).success(function(e){d.resolve(e)}).error(function(e){e?(g&&t.emit("error.api",e),d.reject(e)):d.resolve()}).finally(function(){t.emit(u+"."+o.toLowerCase()+".end")}),d.promise}return{send:a}}]),angular.module("pancakesAngular").factory("chainPromises",["$q",function(e){return function(n,t){return n&&n.length?n.reduce(e.when,e.when(t)):e.when(t)}}]),angular.module("pancakesAngular").factory("eventBus",["$document","$rootScope",function(e,n){var t=n.$new(!0);return t.on=t.$on,t.watch=t.$watch,t.emit=function(){n.$broadcast.apply(n,arguments)},t.bindToDocument=function(n,t){e.bind(n,t)},t}]),angular.module("pancakesAngular").factory("config",function(){return{staticFileRoot:"/"}}),function(){function e(e,n,t,r,o){a.directive(e,["i18n","config",function(a,i){return function(u,l,c){var d=c[e];if(r)var s=u.$watch(d,function(e){void 0!==e&&null!==e&&(e="file"===t?i.staticFileRoot+e:a.translate(e),"text"===n?l.text(e):"class"===n?c.$addClass(e):c.$set(n,e,u),o&&s&&s())});else if(!r&&null!==t)if(d.indexOf("{{")>=0)var f=c.$observe(e,function(e){e="file"===t?i.staticFileRoot+e:a.translate(e,u),"text"===n?l.text(e):c.$set(n,e,u),o&&f&&f()});else{var g="file"===t?i.staticFileRoot+d:a.translate(d);"text"===n?l.text(g):c.$set(n,g,u)}}}])}var n,t,r={href:"file",src:"file",title:"i18n",placeholder:"i18n",popover:"i18n",value:"i18n",alt:"i18n",text:"i18n",id:null,type:null,"class":null},a=angular.module("pancakesAngular");for(var o in r)r.hasOwnProperty(o)&&(n=o.substring(0,1).toUpperCase()+o.substring(1),e("b"+n,o,null,!0,!1),e("bo"+n,o,null,!0,!0),t=r[o],t&&(e("f"+n,o,t,!1,!1),e("fo"+n,o,t,!1,!0),e("bf"+n,o,t,!0,!1),e("bfo"+n,o,t,!0,!0)))}(),angular.module("pancakesAngular").factory("i18n",function(){return{translate:function(e){return e}}}),angular.module("pancakesAngular").factory("initialModel",function(){return{}}),angular.module("pancakesAngular").factory("pageSettings",["$window","$rootElement",function(e,n){function t(t,r){e.document.title=t;var a=angular.element(n.find("meta[name=description]")[0]);a.attr("content",r)}function r(e){var t="gh-"+e.replace(".","-"),r=n.find(".maincontent");r&&r.length&&(r=angular.element(r[0]),r.attr("id",t))}return{updateHead:t,updatePageStyle:r}}]),angular.module("pancakesAngular").factory("serviceHelper",["ajax",function(e){function n(n){return function(t){return e.send(n.url,n.httpMethod,t,n.resourceName)}}function t(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n(e[r]));return t}function r(e){var n=function(e){this.data=e};return n.prototype.save=function(){return this.data&&this.data._id?e.update({data:this.data}):e.create({data:this.data})},angular.extend(n,e),n}return{genServiceMethod:n,genService:t,genModel:r}}]),angular.module("pancakesAngular").provider("stateLoader",function(){function e(e){for(var n=e.split("."),t="",r=0;r<n.length;r++)t+=n[r].substring(0,1).toUpperCase()+n[r].substring(1);return t}this.loadStates=function(n,t,r){var a={};angular.forEach(t,function(t){angular.forEach(t.urls,function(o,i){var u=r[t.name]||function(){return{}},l=(t.name+(0===i?"":"--"+i)).replace(/\./g,"-"),c={url:o,resolve:{initialModel:u,loadedUser:["activeUser",function(e){return e.init()}]},onEnter:["$rootScope",function(e){e.stateData=t.data||{},e.pageLoadTimestamp=(new Date).getTime()}],views:{"":{controller:e(t.name+"Ctrl"),templateUrl:"templates/"+t.name}}};a[l]&&(l+=(new Date).getTime()),a[l]=!0,n.state(l,c)})})},this.$get=function(){return{getPascalCase:e}}}),angular.module("pancakesAngular").factory("tplHelper",["$q","$injector","pageSettings","eventBus",function(e,n,t,r){function a(e,n){if(n){e.defaults=n;for(var t in n)n.hasOwnProperty(t)&&void 0===e[t]&&(e[t]=n[t])}}function o(e,n){n&&(e.rerenderComponent=function(){n.go(n.current,{},{reload:!0})})}function i(t,r,a){a&&(t.remodel=function(){var r={model:t,defaults:t.defaults};return e.when(n.invoke(a,null,r)).then(function(e){return angular.extend(t,e)})},r&&t.remodel())}function u(e,t){for(var r in t)t.hasOwnProperty(r)&&t[r]&&(e[r]=n.invoke(t[r]))}function l(e,t){t&&t.length&&(t.push(function(){var n,r;for(n=0;n<arguments.length;n++)r=arguments[n],e[t[n]]=r}),n.invoke(t))}function c(e){var n=!0;return function(){n?n=!1:e()}}function d(e,n,t){var r,a,o,i;if(n&&t)for(r=0;r<n.length;r++)i=c(t),a=n[r],o=a.charAt(0),"^"===o?e.$watchCollection(a.substring(1),i):"*"===o?e.$watch(a.substring(1),i,!0):e.$watch(a,i)}function s(n){return function(){var t=n.remodel||function(){return!0};e.when(t(n)).then(function(){n.rerenderComponent()})}}function f(e,n){return d(e,n,e.remodel)}function g(e,n){return d(e,n,s(e))}function p(e,n,t){var a,o,i=[];if(n&&t){for(a=0;a<n.length;a++)o=n[a],i.push(r.on(o,t));e.$on("$destroy",function(){for(var e=0;e<i.length;e++)i[e]()})}}function h(e,n){return p(e,n,e.remodel)}function v(e,n){return p(e,n,s(e))}function m(e,n,r){if(angular.extend(e,n),e.pageHead&&e.pageHead.title){var a=e.pageHead.title;t.updateHead(a,e.pageHead.description||a),t.updatePageStyle(r)}}function w(e,t){var a=[];for(var o in t)t.hasOwnProperty(o)&&t[o]&&a.push(r.on(o,n.invoke(t[o])));e.$on("$destroy",function(){for(var e=0;e<a.length;e++)a[e]()})}function $(e,t){if(t)for(var r in t)t.hasOwnProperty(r)&&t[r]&&(e[r]=n.invoke(t[r]))}return{setDefaults:a,generateRerender:o,generateRemodel:i,addValidations:u,attachToScope:l,generateRerenderCallback:s,rerenderOnScopeChange:g,rerenderOnEvent:v,remodelOnScopeChange:f,remodelOnEvent:h,generateScopeChangeHandler:c,doOnScopeChange:d,doOnEvent:p,addInitModel:m,registerListeners:w,addEventHandlers:$}}]);