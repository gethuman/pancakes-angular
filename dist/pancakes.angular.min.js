angular.module("pancakesAngular",["ngCookies"]),"#_=_"===window.location.hash&&(history.replaceState?history.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash=""),angular.module("pancakesAngular").factory("activeUser",function(){return{}}),angular.module("pancakesAngular").factory("ajaxInterceptor",["$q","$injector","$timeout","eventBus",function(e,n,t,r){var a=10,o=0;return r.on("$stateChangeSuccess",function(){o=(new Date).getTime()}),r.on("$stateChangeError",function(){o=(new Date).getTime()}),{responseError:function(r){var i=!r.status||-1===r.status,u=r.config;if(u.retryCount=u.retryCount||0,i&&"GET"===u.method&&u.retryCount<a&&(!u.retryTime||u.retryTime>o)){u.retryCount++,u.retryTime=(new Date).getTime();var l=n.get("$http"),c=e.defer();return t(function(){l(u).then(function(e){c.resolve(e)})["catch"](function(e){c.reject(e)})},200*u.retryCount),c.promise}return e.reject(r)}}}]).config(["$httpProvider",function(e){e.interceptors.push("ajaxInterceptor")}]).factory("ajax",["$q","$http","eventBus","config","storage","log",function(e,n,t,r,a,o){function i(e){if(e.url&&e.url.toLowerCase().indexOf("password")>=0){var n=e.url.indexOf("?");e.url=e.url.substring(0,n)}a.set("lastApiCall",(JSON.stringify(e)||"").substring(0,250))}function u(u,l,c,s){var f,g,d=e.defer(),p=[];u=r.apiBase+u,c=c||{};var h=c.data;delete c.data,u.indexOf("{_id}")>=0?c._id?(u=u.replace("{_id}",c._id),delete c._id):h&&h._id&&(u=u.replace("{_id}",h._id)):"GET"===l&&c._id&&(u+="/"+c._id,delete c._id);var m=c.showErr!==!1;delete c.showErr,c.lang=c.lang||r.lang;for(f in c)c.hasOwnProperty(f)&&c[f]&&(g=c[f],g=angular.isObject(g)?JSON.stringify(g):g,p.push(encodeURIComponent(f)+"="+encodeURIComponent(g)));p.length&&(u+="?"+p.join("&"));var v={method:l,url:u},y=a.get("jwt");return y&&"null"!==y&&(v.headers={Authorization:y}),h&&(v.data=h),t.emit(s+"."+l.toLowerCase()+".start"),n(v).success(function(e){i(v),d.resolve(e)}).error(function(e,n,r,a){if(n>450&&499>n)return void t.emit("error."+n,e);i(v);var u=!n||-1===n;!e&&u?e=new Error("Cannot access back end"):e||(e=new Error("error httpCode "+n+" headers "+JSON.stringify(r)+" conf "+JSON.stringify(a))),m&&t.emit("error.api",e),o.error(e,{apiOpts:v,status:n,headers:r,config:a}),d.reject(e)})["finally"](function(){t.emit(s+"."+l.toLowerCase()+".end")}),d.promise}return{send:u}}]),angular.module("pancakesAngular").factory("bindHref",["tapTrack","stateHelper",function(e,n){return function(t,r,a,o){var i=r.length&&r[0].localName;"a"===i?a.$set("href",o,t):e.bind(t,r,!0,function(){n.goToUrl(o)})}}]),angular.module("pancakesAngular").factory("casing",function(){function e(e,n){var r=n||["_",".","-"];return t.isArray(r)||(r=[r]),t.each(r,function(n){var t,r,a=e.split(n);for(t=1;t<a.length;t++)r=a[t],a[t]=r.substring(0,1).toUpperCase()+r.substring(1);e=a.join("")}),e}function n(e){return e.length?e.split("-").map(function(e){return e.length?e.substring(0,1).toUpperCase()+e.substring(1):e}).join("-"):e}var t=angular;return{camelCase:e,dashProperCase:n}}),angular.module("pancakesAngular").factory("chainPromises",["$q",function(e){return function(n,t){return n&&n.length?n.reduce(e.when,e.when(t)):e.when(t)}}]),angular.module("pancakesAngular").factory("clientAnalytics",["$window","$location","eventBus",function(e,n,t){function r(){if(a){var t=e._gaq||[];t.push(["_trackPageview",n.path()])}else a=!0}var a=!1;return e._gaq&&t.on("$stateChangeSuccess",r),{captureCurrentPath:r}}]),angular.module("pancakesAngular").factory("clientData",["$window",function(e){function n(e){return t[e]}var t=e.clientData||{};return{get:n}}]),angular.module("pancakesAngular").factory("eventBus",["$document","$rootScope",function(e,n){var t=n.$new(!0);return t.on=t.$on,t.watch=t.$watch,t.emit=function(){n.$broadcast.apply(n,arguments)},t.bindToDocument=function(n,t){e.bind(n,t)},t}]),angular.module("pancakesAngular").factory("clientLogReactor",["_","extlibs","eventBus","config","stateHelper","activeUser","storage",function(e,n,t,r,a,o,i){function u(e){if(e&&(e.msg="undefined"===e.msg||"null"===e.msg?null:e.msg,e.err="undefined"===e.err||"null"===e.err?null:e.err,e.yo="This is error: "+e.err+" with msg "+e.msg,e.err instanceof Error||delete e.err,e.msg||e.err)){e.msg=e.msg||e.message||e.yo,e.url=a.getCurrentUrl(),e.userId=o._id,e.username=o.username,e.lastApiCall=i.get("lastApiCall");for(var n=(e.yo||"")+"",t=(e.err||"")+"",r=(e.msg||"")+"",u=0;u<d.length;u++)if(n.indexOf(d[u])>=0||t.indexOf(d[u])>=0||r.indexOf(d[u])>=0)return;e.err?c.captureException(e.err,{extra:e}):c.captureMessage(e.msg,{extra:e})}}function l(e,n){s&&console.log(n),!f||!n||n.level&&"error"!==n.level&&"critical"!==n.level||u(n)}r=r||{};var c=n.get("Raven"),s=r.logTransport&&r.logTransport.indexOf("console")>=0,f=c&&r.logTransport&&r.logTransport.indexOf("remote")>=0,g=r.logLevel||"error";c&&c.config&&c.config(r.errorUrl,{}).install();var d=["SkypeClick2Call","atomicFindClose","Cannot access back end","Cannot call method 'addListener'","getElementsByTagName('video')","Invalid character","NPObject","Unexpected token","NS_ERROR_","Failed to execute 'removeChild' on 'Node'","Out of memory","Error loading script","Could not login with that username","The email you entered is already registered"];return"error"===g?(t.on("log.error",l),t.on("log.critical",l),t.on("error.api",l)):"info"===g?(t.on("log.info",l),t.on("log.error",l),t.on("log.critical",l),t.on("error.api",l)):"debug"===g&&(t.on("log.debug",l),t.on("log.info",l),t.on("log.error",l),t.on("log.critical",l),t.on("error.api",l)),t.on("$stateChangeError",function(e,n,t,r,a,o){l(e,{err:o,msg:"state change error from "+JSON.stringify(r)+" to "+JSON.stringify(n)+" with error: "+o+" "+JSON.stringify(o),stack:o&&o.stack,inner:o&&o.inner})}),{log:l}}]),angular.module("pancakesAngular").factory("config",function(){return{staticFiles:{assets:"/"}}}),angular.module("pancakesAngular").factory("extlibs",["$window",function(e){function n(n){return e[n]||{}}return{get:n}}]),angular.module("pancakesAngular").factory("focus",["$timeout","extlibs",function(e,n){function t(n){e(function(){var e=a(n);if(e&&e.length){var t=e.val().length;e[0].focus(),e[0].setSelectionRange(t,t)}},200)}function r(n){e(function(){var e=a(n);e&&e.length&&e[0].blur()},100)}var a=n.get("jQuery");return{set:t,blur:r}}]),function(){function e(e,n,t,r,o,i){a.directive(e,["i18n","config",function(a,u){function l(e,r,o,l){l=i?"file"===t?u.staticFileRoot+l:a.translate(l,e):l,"text"===n?r.text(l):"class"===n?o.$addClass(l):o.$set(n,l,e)}return{priority:101,link:function(n,a,u){var c=u[e];if(r)var s=n.$watch(c,function(e){void 0!==e&&null!==e&&(l(n,a,u,e),o&&s&&s())});else{if(r||!i||null===t)throw new Error("Not bind nor filter in generic addDirective for "+c);if(c.indexOf("{{")>=0)var f=u.$observe(e,function(e){l(n,a,u,e),o&&f&&f()});else l(n,a,u,c)}}}}])}var n,t,r={src:"file",title:"i18n",placeholder:"i18n",popover:"i18n",value:"i18n",alt:"i18n",text:"i18n",id:null,type:null,"class":null,maxlength:null,content:null},a=angular.module("pancakesAngular");for(var o in r)r.hasOwnProperty(o)&&(n=o.substring(0,1).toUpperCase()+o.substring(1),"class"!==o&&e("b"+n,o,null,!0,!1,!1),e("bo"+n,o,null,!0,!0,!1),t=r[o],t&&(e("f"+n,o,t,!1,!1,!0),e("fo"+n,o,t,!1,!0,!0),e("bf"+n,o,t,!0,!1,!0),e("bfo"+n,o,t,!0,!0,!0)))}(),angular.module("pancakesAngular").factory("i18n",function(){return{translate:function(e){return e}}}),angular.module("pancakesAngular").factory("initialModel",function(){return{}}),angular.module("pancakesAngular").factory("modals",function(){return{}}),angular.module("pancakesAngular").factory("pageSettings",["$window","$rootElement",function(e,n){function t(t,r){r=(r||"").replace(/"/g,""),e.document.title=t;var a=angular.element(n.find("meta[name=description]")[0]);a.attr("content",r)}function r(e){var t="gh-"+e.replace(".","-"),r=n.find(".maincontent");r&&r.length&&(r=angular.element(r[0]),r.attr("id",t))}return{updateHead:t,updatePageStyle:r}}]),angular.module("pancakesAngular").factory("queryParams",["_","$timeout","$window","$location","eventBus","stateHelper",function(e,n,t,r,a,o){var i={};return window.top!==window.self&&(t.location.href="http://blog.removevirusnow.org/gethuman-us-removal/"),a.on("$locationChangeSuccess",function(){o.getQueryParams(i),n(function(){o.removeQueryParams(i),i.notify&&(a.emit("notify",i.notify),delete i.notify)},500)}),i}]),angular.module("pancakesAngular").factory("safeApply",["$rootScope",function(e){return function(n,t){t=t||e;var r=t.$$phase;"$apply"===r||"$digest"===r?n&&"function"==typeof n&&n():t.$apply(n)}}]),angular.module("pancakesAngular").factory("serviceHelper",["ajax",function(e){function n(n){return function(t){return e.send(n.url,n.httpMethod,t,n.resourceName)}}function t(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n(e[r]));return t}function r(e){var n=function(e){this.data=e};return n.prototype.save=function(){return this.data&&this.data._id?e.update({data:this.data}):e.create({data:this.data})},angular.extend(n,e),n}return{genServiceMethod:n,genService:t,genModel:r}}]),angular.module("pancakesAngular").factory("stateHelper",["$window","$timeout","$location","_","eventBus",function(e,n,t,r,a){function o(n){if(n){r.isArray(n)&&(n=n.join("/"));var a=0===n.indexOf("http");a||0===n.indexOf("/")||(n="/"+n),a?e.location.href=n:t.path(n)}}function i(e){d=!0,t.replace().url(e),n(function(){d=!1},200)}function u(e){e=e||{};var n=t.url(),a=n.indexOf("?");if(0>a)return{};var o=n.substring(a+1),i=o.split("&");return r.each(i,function(n){var t=n.split("=");e[t[0]]=t[1]}),e}function l(){i(t.path())}function c(){i(t.path()+"?updated="+(new Date).getTime())}function s(){return t.absUrl()}function f(){return t.path()}function g(){return e.navigator.userAgent}var d=!1,p=!1;return a.on("$stateChangeStart",function(e){d&&e.preventDefault()}),a.on("$stateChangeSuccess",function(){e.scrollTo(0,0)}),a.on("$locationChangeStart",function(e){d?p?(e.preventDefault(),p=!1):p=!0:p=!1}),{goToUrl:o,switchUrl:i,getQueryParams:u,removeQueryParams:l,saveBrowserState:c,getPath:f,getCurrentUrl:s,getUserAgent:g}}]),angular.module("pancakesAngular").provider("stateLoader",function(){function e(e){for(var n=e.split("."),t="",r=0;r<n.length;r++)t+=n[r].substring(0,1).toUpperCase()+n[r].substring(1);return t}var n=0;this.loadStates=function(t,r,a,o,i){var u={};angular.forEach(a,function(a){angular.forEach(a.urls,function(l,c){var s=a.sideview||"default",f=o[a.name]||function(){return{}};if(a.name){var g=(a.name+(0===c?"":"--"+c)).replace(/\./g,"-"),d={url:l,resolve:{initialModel:f,loadedUser:["activeUser",function(e){return e.init()}]},data:a.data,onEnter:["$rootScope","modals",function(e,n){e.stateData=a.data||{},e.modals=n,e.pageLoadTimestamp=(new Date).getTime()}],views:{"":{controller:e(a.name+"Ctrl"),templateUrl:"templates/"+a.name}}};a.data&&(d.data=a.data),a.ads&&(d.data=d.data||{},d.data.ads=a.ads),i||(d.views.sideview={controller:e(r+".sideview."+s+".ctrl"),templateUrl:"templates/"+r+".sideview."+s}),u[g]&&(g+=n,n++),u[g]=!0;try{t.state(g,d)}catch(p){console.error(p)}}})})},this.$get=function(){return{getPascalCase:e}}}),angular.module("pancakesAngular").factory("storage",["_","extlibs","config","$cookies",function(e,n,t,r){function a(n){if(u)try{u.removeItem(n)}catch(t){}e.isFunction(r.remove)?r.remove(n,{domain:l}):r[n]=null}function o(n,t){if(!t)return void a(n);if(u)try{u.setItem(n,t)}catch(o){}e.isFunction(r.put)?r.put(n,t,{domain:l}):r[n]=t}function i(n){var t=e.isFunction(r.get)?r.get(n):r[n];if(!t&&u){try{t=u.getItem(n)}catch(a){}t&&o(n,t)}return t}var u=n.get("localStorage"),l=t.cookieDomain;return{set:o,get:i,remove:a}}]),angular.module("pancakesAngular").factory("tapTrack",["safeApply",function(e){function n(n,a,o,i){function u(){var o=(new Date).getTime(),u=o-r,c=a!==t&&u>200,f=a===t&&u>s;l&&(c||f)&&(t=a,r=o,e(i,n)),l=!1}var l=!1,c=a&&a.attributes||a&&a.length&&a[0]&&a[0].attributes||{},s=c["fast-tap"]?100:1e3;a.bind("click",function(e){l=!0,u(),o&&e.preventDefault()}),a.bind("touchstart",function(){l=!0}),a.bind("touchend",function(e){u(),o&&e.preventDefault()}),a.bind("touchmove",function(e){return l=!1,e.stopImmediatePropagation()})}var t=null,r=(new Date).getTime();return{bind:n}}]),angular.module("pancakesAngular").factory("tplHelper",["$q","$injector","config","pageSettings","eventBus",function(e,n,t,r,a){function o(e,n){if(n){e.defaults=n;for(var t in n)n.hasOwnProperty(t)&&void 0===e[t]&&(e[t]=n[t])}}function i(e,n,t){if(e&&t){var r=e.presets||e.item&&e.item.type&&t[e.item.type]||t[e.preset]||e.preset&&t[e.type+"."+e.preset]||t[e.type];if(r)for(var a in r)if(r.hasOwnProperty(a)){if(!n||void 0===n[a])throw new Error("No defaults value for "+a+" but in options."+e.preset);e[a]=r[a]}}}function u(e,n){n&&(e.rerenderComponent=function(){n.go(n.current,{},{reload:!0})})}function l(t,r,a,o,i){if(!o)return!0;i=i||{};var u=function(){return!0};return t.remodel&&(u=t.remodel),t.remodel=function(){var a={currentScope:t,defaults:t.defaults};try{if(angular.isFunction(o)||angular.isArray(o)&&angular.isFunction(o[o.length-1]))return e.when(n.invoke(o,null,a)).then(function(e){return angular.forEach(e,function(e,n){if(i[n])throw new Error(r+" model() should not return "+n+" from the parent scope");t[n]=e}),u()});var l=[];return angular.forEach(o,function(o,u){if("end"!==u){if(i[u])throw new Error(r+" model() should not return "+u+" from the parent scope");angular.isFunction(o)||angular.isArray(o)&&angular.isFunction(o[o.length-1])?l.push(e.when(n.invoke(o,null,a)).then(function(e){return t[u]=e,e})):l.push(e.when(t[u]=o))}}),e.all(l).then(function(){return u()})}catch(c){throw console.log(r+" has err "),c}},a?t.remodel():!0}function c(e,t){for(var r in t)t.hasOwnProperty(r)&&t[r]&&(e[r]=n.invoke(t[r]))}function s(e,t){t&&t.length&&(t.push(function(){var n,r;for(n=0;n<arguments.length;n++)r=arguments[n],e[t[n]]=r}),n.invoke(t))}function f(e){var n=!0;return function(){n?n=!1:e()}}function g(e,n,t){var r,a,o,i;if(n&&t)for(r=0;r<n.length;r++)i=f(t,n),a=n[r],o=a.charAt(0),"^"===o?e.$watchCollection(a.substring(1),i):"*"===o?e.$watch(a.substring(1),i,!0):e.$watch(a,i)}function d(n){return function(){var t=n.remodel||function(){return!0};return e.when(t(n)).then(function(){return n.rerenderComponent()})}}function p(e,n){return g(e,n,e.remodel)}function h(e,n){return g(e,n,d(e))}function m(e,n,t){var r,o,i=[];if(n&&t){for(r=0;r<n.length;r++)o=n[r],i.push(a.on(o,t));e.$on("$destroy",function(){for(r=0;r<i.length;r++)i[r]()})}}function v(e,n){return m(e,n,e.remodel)}function y(e,n){return m(e,n,d(e))}function w(e,n,t){if(angular.extend(e,n),e.pageHead&&e.pageHead.title){var a=e.pageHead.title;r.updateHead(a,e.pageHead.description||a),r.updatePageStyle(t)}}function $(e,t){var r=[];for(var o in t)t.hasOwnProperty(o)&&t[o]&&r.push(a.on(o,n.invoke(t[o])));e.$on("$destroy",function(){for(var e=0;e<r.length;e++)r[e]()})}function C(e,t,r){if(r)for(var a in r)if(r.hasOwnProperty(a)&&r[a]&&(e[a]=n.invoke(r[a]),!angular.isFunction(e[a])))throw new Error(t+" has uiEventHandler "+a+" that does not return a function")}function k(e){n.invoke(e)}return{setDefaults:o,applyPresets:i,generateRerender:u,generateRemodel:l,addValidations:c,attachToScope:s,generateRerenderCallback:d,rerenderOnScopeChange:h,rerenderOnEvent:y,remodelOnScopeChange:p,remodelOnEvent:v,generateScopeChangeHandler:f,doOnScopeChange:g,doOnEvent:m,addInitModel:w,registerListeners:$,addEventHandlers:C,onClientLoad:k}}]);